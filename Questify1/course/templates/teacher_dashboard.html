{% extends "base.html" %}

{% block content %}
<h2>–ü–∞–Ω–µ–ª—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</h2>
<p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ user.username }}!</p>

<a href="{% url 'course:course_add' %}" class="btn btn-success mb-3">‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫—É—Ä—Å</a>

{% for course in courses %}
<div class="card mb-3 shadow-sm">
  <div class="card-body">
    <h5>{{ course.title }}</h5>
    <p><strong>–£—Ä–æ–≤–µ–Ω—å:</strong> {{ course.get_level_display }}</p>
    <p><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong>
      {% for cat in course.category.all %}
        {{ cat.name }}{% if not forloop.last %}, {% endif %}
      {% empty %}–ù–µ—Ç{% endfor %}
    </p>
    <a href="{% url 'course:course_edit' course.pk %}" class="btn btn-sm btn-primary">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫—É—Ä—Å</a>
    <a href="{% url 'course:course_delete' course.pk %}" class="btn btn-sm btn-danger">–£–¥–∞–ª–∏—Ç—å –∫—É—Ä—Å</a>

    <h6 class="mt-3">–£—Ä–æ–∫–∏:</h6>
    <ul>
      {% for lesson in course.lessons.all %}
        <li>
          {{ lesson.title }}
          <a href="{% url 'course:lesson_edit' lesson.pk %}" class="btn btn-sm btn-outline-primary">‚úèÔ∏è</a>
          <a href="{% url 'course:lesson_delete' lesson.pk %}" class="btn btn-sm btn-outline-danger">üóëÔ∏è</a>
          <a href="{% url 'course:generate_quiz' lesson.id %}" class="btn btn-sm btn-primary">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç</a>
        </li>
      {% empty %}
        <li>–£—Ä–æ–∫–∏ –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã.</li>
      {% endfor %}
    </ul>
    <a href="{% url 'course:lesson_add' course.pk %}" class="btn btn-sm btn-success">‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—Ä–æ–∫</a>
  </div>
</div>
{% empty %}
<p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∫—É—Ä—Å–æ–≤.</p>
{% endfor %}
{% endblock %}
